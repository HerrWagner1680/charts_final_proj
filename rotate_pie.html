<html>
  <head>
    <meta charset="utf-8">
  <title>piechart with value sliders</title>
<!--    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css"> -->
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<!-- <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script> -->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});

//jquery range slider
//for more details see http://simeydotme.github.io/jQuery-ui-Slider-Pips/

  // $(function() {
  //   $( "#slider" ).slider({
  //                   value: 0,
  //                   min: -180,
  //                   max: 180,
  //                   step: 10,
  //                   slide: function( event, ui ) {
  //                     $( "#amount" ).val(ui.value );
  //                   }
  //                 })
  //                 // .slider("pips", {
  //                 //   rest: "label",
  //                 //   step: 2
  //                 // }).slider("float");


  //   $( "#amount" ).val($( "#slider" ).slider( "value" ) );
  // });

    </script>
  </head>
  <body>
    <div id="piechart" style="width: 900px; height: 500px;"></div>

<!-- http://stackoverflow.com/questions/15935837/how-to-display-a-range-input-slider-vertically -->

<!-- NOTE - PIEHOLE DOES NOT WORK IN 3D MODE ... orient="vertical" -->
<label for="piehole3">Donut hole (range 0 - 0.9 of radius): </label>
<input id="piehole3" type="range" min ="0" max="0.9" step="0.05" value="0"/>
<input type="text" id="holeRange3" size="2" value="0" readonly/>
<br>
<!-- http://www.html5tutorial.info/html5-range.php -->
 <label for="slider3">Degrees of rotation:</label>
 <input id="slider3" type ="range" min ="-180" max="180" step ="10" value="0"/>
<!-- <input id="slider3" type ="range" min ="-2.5" max="3.0" step ="0.1" value="0"/> -->
<input type="text" id="rangeValue3" size="2" value="0" readonly/>

<!--   <label for="amount">Rotation amount (10 degree increments):</label> -->
<!--   <input type="text" id="amount" readonly style="border:0; color:#000; font-weight:bold;"> -->
<!--   <input type="text" id="amount" readonly> -->
<!-- <input type="range" id="amount"> -->
 
<div id="slider"></div>

<script>



var revise = function(){
  console.log("revise function")
  console.log($("#slider3").val())
  console.log(parseFloat($("#piehole3").val()))
  $("#rangeValue3").val($('#slider3').val())
  $("#holeRange3").val(parseFloat($("#piehole3").val()))
  // });

  var deg =  parseInt($( "#slider3" ).val());
  var hole = parseFloat($("#piehole3").val());
  // $("#slider").mouseup(function(){
  // console.log("change")
  // var deg =  parseInt($( "#amount" ).val());

  console.log(hole)

  // console.log(deg)
        // function rotateChart() {
          var dat = google.visualization.arrayToDataTable([
            ['Language', 'Speakers (in millions)'],
            ['German',  5.85],
            ['French',  1.66],
            ['Italian', 0.316],
            ['Romansh', 0.0791]
          ]);

            // var deg =  parseInt($( "#slider3" ).val());
            // console.log(deg)
        var opti = {
          // height: 400,
          // width: 400,
          // legend: 'none',
          pieSliceText: 'label',
          title: 'Swiss Language Use',
          pieStartAngle: deg,
          pieHole: hole,
          // is3D: true,
        };

          var cha = new google.visualization.PieChart(document.getElementById('piechart'));
          cha.draw(dat, opti);
       // }

   // google.setOnLoadCallback(rotateChart);

 };

$("#slider3").on("change", revise);
$("#piehole3").on("change", revise);
//NOTE - piehole does not work in 3d mode

if (x == null) {
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Language', 'Speakers (in millions)'],
      ['German',  5.85],
      ['French',  1.66],
      ['Italian', 0.316],
      ['Romansh', 0.0791]
    ]);

  var options = {
    // height: 400,
    // width: 400,
    // legend: 'none',
    pieSliceText: 'label',
    title: 'Swiss Language Use',
    pieStartAngle: 0,
    pieHole: 0,
    // is3D: true,
  };

    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
    chart.draw(data, options);
  }

  var x = 1
}

</script>

  </body>
</html>